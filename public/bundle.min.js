!function(){return function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}}()({1:[function(require,module,exports){module.exports=[{name:"diego-rivera",description:"Autor",x:38.92,y:60.15,width:1,height:5,box:null},{name:"frida-khalo",description:"Amor del autor",x:39.86,y:54.8,width:1,height:5,box:null}]},{}],2:[function(require,module,exports){(()=>{const{renderer:renderer}=require("./src/renderer"),characters=require("./data/characters.js"),container=document.getElementById("container");let containerWidth=container.clientWidth,containerHeight=container.clientHeight;const instance=renderer({minScale:.1,maxScale:30,element:container,scaleSensitivity:50});let startX,startY,isDragging=!1;function calculateMousePosition(event){const rect=container.getBoundingClientRect(),scale=instance.getScale();let mouseX,mouseY;return{mouseX:mouseX=100*(event.clientX-rect.left)/(containerWidth*scale),mouseY:mouseY=100*(event.clientY-rect.top)/(containerHeight*scale)}}function createHighlightElement(character){let highlightElement=document.getElementById(`highlight-${character.name}`);return highlightElement||((highlightElement=document.createElement("div")).id=`highlight-${character.name}`,highlightElement.className="highlight",container.appendChild(highlightElement)),highlightElement}function positionHighlightBoxes(mousePosition){characters.forEach(character=>{const isHovered=mousePosition.mouseX>=character.x&&mousePosition.mouseX<=character.x+character.width&&mousePosition.mouseY>=character.y&&mousePosition.mouseY<=character.y+character.height,highlightElement=createHighlightElement(character);isHovered?(highlightElement.style.display="block",highlightElement.style.top=`${character.y}%`,highlightElement.style.left=`${character.x}%`,highlightElement.style.width=`${character.width}%`,highlightElement.style.height=`${character.height}%`):highlightElement.style.display="none"})}positionHighlightBoxes({mouseX:0,mouseY:0}),window.addEventListener("resize",function(){containerWidth=container.clientWidth,containerHeight=container.clientHeight;const currentMousePosition={mouseX:0,mouseY:0};if(characters.length>0){const highlightElement=createHighlightElement(characters[0]);currentMousePosition.mouseX=parseFloat(highlightElement.style.left),currentMousePosition.mouseY=parseFloat(highlightElement.style.top)}positionHighlightBoxes(currentMousePosition)}),container.addEventListener("mousedown",event=>{0===event.button&&(event.preventDefault(),isDragging=!0,startX=event.clientX,startY=event.clientY)}),container.addEventListener("mousemove",event=>{if(!isDragging)return;event.preventDefault();const moveX=event.clientX-startX,moveY=event.clientY-startY;startX=event.clientX,startY=event.clientY,instance.panBy({originX:moveX,originY:moveY})}),window.addEventListener("mouseup",()=>{isDragging=!1}),container.addEventListener("wheel",event=>{event.preventDefault(),instance.zoom({deltaScale:Math.sign(event.deltaY)>0?-1:1,x:event.pageX,y:event.pageY})}),container.addEventListener("dblclick",()=>{instance.panTo({originX:0,originY:0,scale:1})}),container.addEventListener("mousemove",function(event){const{mouseX:mouseX,mouseY:mouseY}=calculateMousePosition(event);console.log("Mouse move at: x=",mouseX.toFixed(2),"% & y=",mouseY.toFixed(2),"%"),positionHighlightBoxes({mouseX:mouseX,mouseY:mouseY})}),container.addEventListener("click",function(event){const{mouseX:mouseX,mouseY:mouseY}=calculateMousePosition(event),scale=instance.getScale(),pan=instance.getPan();console.log("Mouse CLICK at: x=",mouseX.toFixed(2),"% & y=",mouseY.toFixed(2),"%"),console.log("Scale: ",scale),console.log("Pan: ",pan);const clickedCharacter=characters.find(character=>mouseX>=character.x&&mouseX<=character.x+character.width&&mouseY>=character.y&&mouseY<=character.y+character.height);clickedCharacter?(console.log("Character clicked!"),function(character,mouseX,mouseY){const currentScale=instance.getScale(),adjustedMouseX=mouseX/currentScale,adjustedMouseY=mouseY/currentScale,floatingWindow=document.createElement("div");floatingWindow.className="floating-window",floatingWindow.style.left=`${adjustedMouseX}px`,floatingWindow.style.top=`${adjustedMouseY}px`;const content=`\n      <h3>${character.name}</h3>\n      <p>${character.description}</p>\n    `;floatingWindow.innerHTML=content,document.body.appendChild(floatingWindow)}(clickedCharacter,event.clientX,event.clientY)):console.log("No character clicked!")}),container.addEventListener("mouseleave",function(){characters.forEach(character=>{const highlightElement=document.getElementById(`highlight-${character.name}`);highlightElement&&(highlightElement.style.display="none")});const floatingWindow=document.querySelector(".floating-window");floatingWindow&&floatingWindow.remove()})})()},{"./data/characters.js":1,"./src/renderer":3}],3:[function(require,module,exports){const getMatrix=({scale:scale,translateX:translateX,translateY:translateY})=>`matrix(${scale}, 0, 0, ${scale}, ${translateX}, ${translateY})`,pan=({state:state,originX:originX,originY:originY})=>{state.transformation.translateX+=originX,state.transformation.translateY+=originY,state.element.style.transform=getMatrix({scale:state.transformation.scale,translateX:state.transformation.translateX,translateY:state.transformation.translateY})},makeZoom=state=>({zoom:({x:x,y:y,deltaScale:deltaScale})=>{const{left:left,top:top}=state.element.getBoundingClientRect(),{minScale:minScale,maxScale:maxScale,scaleSensitivity:scaleSensitivity}=state,scale=state.transformation.scale,newScale=(({scale:scale,minScale:minScale,maxScale:maxScale,scaleSensitivity:scaleSensitivity,deltaScale:deltaScale})=>{let newScale=scale+deltaScale/(scaleSensitivity/scale);return newScale=Math.max(minScale,Math.min(newScale,maxScale))})({scale:scale,deltaScale:deltaScale,minScale:minScale,maxScale:maxScale,scaleSensitivity:scaleSensitivity}),originX=x-left,originY=y-top,newOriginX=originX/scale,newOriginY=originY/scale,translate=(({minScale:minScale,maxScale:maxScale,scale:scale})=>({pos:pos,prevPos:prevPos,translate:translate})=>(({minScale:minScale,maxScale:maxScale,scale:scale})=>scale<=maxScale&&scale>=minScale)({minScale:minScale,maxScale:maxScale,scale:scale})&&(({pos:pos,prevPos:prevPos})=>pos!==prevPos)({pos:pos,prevPos:prevPos})?translate+(pos-prevPos*scale)*(1-1/scale):translate)({scale:scale,minScale:minScale,maxScale:maxScale}),translateX=translate({pos:originX,prevPos:state.transformation.originX,translate:state.transformation.translateX}),translateY=translate({pos:originY,prevPos:state.transformation.originY,translate:state.transformation.translateY});state.element.style.transformOrigin=`${newOriginX}px ${newOriginY}px`,state.element.style.transform=getMatrix({scale:newScale,translateX:translateX,translateY:translateY}),state.transformation={originX:newOriginX,originY:newOriginY,translateX:translateX,translateY:translateY,scale:newScale}}});module.exports={renderer:({minScale:minScale,maxScale:maxScale,element:element,scaleSensitivity:scaleSensitivity=10})=>{const state={element:element,minScale:minScale,maxScale:maxScale,scaleSensitivity:scaleSensitivity,transformation:{originX:0,originY:0,translateX:0,translateY:0,scale:1}};return Object.assign({},makeZoom(state),(state=>({panBy:({originX:originX,originY:originY})=>pan({state:state,originX:originX,originY:originY}),panTo:({originX:originX,originY:originY,scale:scale})=>{state.transformation.scale=scale,pan({state:state,originX:originX-state.transformation.translateX,originY:originY-state.transformation.translateY})}}))(state),{getScale:()=>state.transformation.scale,getPan:()=>({x:state.transformation.translateX,y:state.transformation.translateY})})}}},{}]},{},[2]);
